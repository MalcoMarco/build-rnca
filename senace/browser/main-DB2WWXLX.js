import{A as se,Aa as E,B as w,C as ce,D as l,Da as xe,Ea as _,F as q,Fa as ye,G as le,Ga as we,H as a,Ha as Se,I as n,Ia as B,J as c,Ja as g,L as O,M as S,Ma as Ee,N as D,Na as M,O as de,Oa as _e,P as ue,Pa as Me,Q as pe,Ra as Ae,S as d,Sa as Re,Ta as ke,U as I,Xa as je,Y as Q,Ya as Ie,Z as P,Za as Le,_ as W,_a as L,a as J,ab as Te,b as ee,bb as We,c as te,d as ie,f as oe,g as re,ga as me,h as G,ha as he,j as C,k as A,ka as F,l as x,m as p,n as h,o as R,qa as V,r as k,ra as fe,s as j,t as ne,ta as ge,u as N,ua as ve,v as ae,w as y,wa as X,xa as H,y as s,ya as be,z as u,za as Ce}from"./chunk-PTMWBTM4.js";import{d as Qe}from"./chunk-5FZOKLP6.js";function Xe(e,f){if(e&1&&(a(0,"div",6)(1,"span",9),d(2),n(),a(3,"span",10),d(4),n()()),e&2){let t=D();s(2),I("",t.headerTitle," "),s(2),I("\xA0 \xA0 ",t.appVersion,"")}}function Ye(e,f){if(e&1){let t=O();a(0,"ul",11)(1,"li",12)(2,"span",13),c(3,"i",14),d(4),n()(),a(5,"li",12)(6,"button",15),S("click",function(){k(t);let o=D();return j(o.logout())}),c(7,"i",16),d(8,"\xA0Cerrar sesi\xF3n"),n()(),a(9,"li",12)(10,"span",17),d(11),n()()()}if(e&2){let t=D();s(4),I(" ",t.ssoUsuario,""),s(7),I(" \xA0 ",t.appVersion,"")}}var Ne=(()=>{class e{constructor(t,i){this.router=t,this.authService=i,this.headerTitle="REGISTRO NACIONAL DE CONSULTORAS AMBIENTALES",this.headerTitle2="",this.appVersion="Ver 1.0",this.ssoUsuario="USER"}ngOnInit(){}get authenticated(){return this.authService.isAuthenticated()}logout(){localStorage.clear(),this.router.navigate(["/login"])}static{this.\u0275fac=function(i){return new(i||e)(u(_),u(g))}}static{this.\u0275cmp=h({type:e,selectors:[["app-header"]],decls:10,vars:2,consts:[[1,"container-fluid"],[1,"row","pt-2","senace-header"],[1,"col-lg-2"],["href","https://www.senace.gob.pe"],[2,"max-height","70px",3,"src"],[1,"col-lg-10","d-flex","align-items-center","justify-content-end"],[1,"ms-3","ps-3","text-end","text-white"],[1,"row","pt-0"],[1,"col","linea-senace"],[1,"arial-narrow-16"],[1,"arial-narrow-10"],[1,"nav","justify-content-end","pt-3"],[1,"nav-item"],[1,"btn",2,"color","white"],[1,"fas","fa-user"],[1,"btn","btn-info",3,"click"],["aria-hidden","true",1,"fa","fa-sign-out"],[1,"btn-text","arial-narrow-10",2,"color","white"]],template:function(i,o){i&1&&(a(0,"header",0)(1,"div",1)(2,"div",2)(3,"a",3),c(4,"img",4),n()(),a(5,"div",5),w(6,Xe,5,2,"div",6)(7,Ye,12,2),n()(),a(8,"div",7),c(9,"div",8),n()()),i&2&&(s(4),l("src","./assets/img/logo_senace200.png",y),s(2),le(6,o.authenticated?7:6))},styles:['.col-print-12[_ngcontent-%COMP%]{width:100%!important;margin-left:0}.linea-senace[_ngcontent-%COMP%]{background-image:url("/rnca/media/linea_senace200-W3VW3XDQ.png");background-attachment:fixed;background-size:100% auto;background-position:left;height:.5em}.btn-text[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;margin:.375rem .75rem;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.senace-header____[_ngcontent-%COMP%]{background-color:red}.senace-header[_ngcontent-%COMP%]{background:-moz-linear-gradient(90deg,#00799D 0%,#00799D 65%,#00557E 100%);background:-webkit-linear-gradient(90deg,#00799D 0%,#00799D 65%,#00557E 100%);background:-o-linear-gradient(90deg,#00799D 0%,#00799D 65%,#00557E 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#00557E",endColorstr="#00799D",GradientType=0);background:-ms-linear-gradient(90deg,#00799D 0%,#00799D 65%,#00557E 100%);background:linear-gradient(90deg,#00799d 0% 65%,#00557e)}']})}}return e})();var $e=()=>["/home"],Je=()=>["/registro-consultora"],Oe=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=h({type:e,selectors:[["app-navbar"]],decls:12,vars:4,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","arial-narrow-12","my-1"],[1,"container-fluid"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLinkActive","active","aria-current","page",1,"nav-link",3,"routerLink"]],template:function(i,o){i&1&&(a(0,"nav",0)(1,"div",1)(2,"button",2),c(3,"span",3),n(),a(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),d(8,"Home"),n()(),a(9,"li",6)(10,"a",7),d(11,"Solicitudes"),n()()()()()()),i&2&&(s(7),l("routerLink",W(2,$e)),s(3),l("routerLink",W(3,Je)))},dependencies:[ye,we]})}}return e})();function it(e,f){e&1&&c(0,"app-navbar")}var De=(()=>{class e{constructor(t){this.authservice=t,this.title="senace"}isAuthenticated(){return this.authservice.isAuthenticated()}static{this.\u0275fac=function(i){return new(i||e)(u(g))}}static{this.\u0275cmp=h({type:e,selectors:[["app-root"]],decls:14,vars:3,consts:[[1,"container-fluid","px-0","d-flex","flex-column","min-vh-100"],[1,"flex-grow-1"],[4,"ngIf"],[1,"pb-2"],[1,"container-fluid"],[1,"mt-auto","bg-dark","text-light","pt-2"],[1,"col-md-12","text-center"],["alt","",3,"src"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"div",1),c(2,"app-header"),w(3,it,1,0,"app-navbar",2),a(4,"div",3)(5,"div",4),c(6,"router-outlet"),n()()(),a(7,"footer",5)(8,"div",6),d(9," SENACE \xA9 todos los derechos reservados 2022 Sede central: Av. Rivera Navarrete 525 San Isidro - Per\xFA "),c(10,"img",7),d(11," (511) 500 0710 "),c(12,"img",7),d(13," contacto@senace.gob.pe "),n()()()),i&2&&(s(3),l("ngIf",o.isAuthenticated()),s(7),l("src","./assets/img/icoPhone.png",y),s(2),l("src","./assets/img/icoMail.png",y))},dependencies:[F,xe,Ne,Oe]})}}return e})();var ot=new x("recaptcha-language"),rt=new x("recaptcha-base-url"),nt=new x("recaptcha-nonce-tag"),Y=new x("recaptcha-settings"),at=new x("recaptcha-v3-site-key"),st=new x("recaptcha-loader-options");function ct(e,f,t,{url:i,lang:o,nonce:r}={}){window.ng2recaptchaloaded=()=>{t(grecaptcha)};let m=document.createElement("script");m.innerHTML="";let{url:v,nonce:T}=f(new URL(i||"https://www.google.com/recaptcha/api.js"));v.searchParams.set("render",e==="explicit"?e:e.key),v.searchParams.set("onload","ng2recaptchaloaded"),v.searchParams.set("trustedtypes","true"),o&&v.searchParams.set("hl",o),m.src=v.href;let $=T||r;$&&m.setAttribute("nonce",$),m.async=!0,m.defer=!0,document.head.appendChild(m)}function lt({v3SiteKey:e,onBeforeLoad:f,onLoaded:t}){let i=e?{key:e}:"explicit";Pe.loadScript(i,f,t)}var Pe={loadScript:ct,newLoadScript:lt};function dt(e){return e.asObservable().pipe(oe(f=>f!==null))}var Fe=(()=>{class e{static{this.ready=null}constructor(t,i,o,r,m,v){this.platformId=t,this.language=i,this.baseUrl=o,this.nonce=r,this.v3SiteKey=m,this.options=v;let T=this.init();this.ready=T?dt(T):ee()}init(){if(e.ready)return e.ready;if(!fe(this.platformId))return;let t=new J(null);return e.ready=t,Pe.newLoadScript({v3SiteKey:this.v3SiteKey,onBeforeLoad:i=>{if(this.options?.onBeforeLoad)return this.options.onBeforeLoad(i);let o=new URL(this.baseUrl??i);return this.language&&o.searchParams.set("hl",this.language),{url:o,nonce:this.nonce}},onLoaded:i=>{let o=i;this.options?.onLoaded&&(o=this.options.onLoaded(i)),t.next(o)}}),t}static{this.\u0275fac=function(i){return new(i||e)(p(ae),p(ot,8),p(rt,8),p(nt,8),p(at,8),p(st,8))}}static{this.\u0275prov=C({token:e,factory:e.\u0275fac})}}return e})(),ut=0,Ve=(()=>{class e{constructor(t,i,o,r){this.elementRef=t,this.loader=i,this.zone=o,this.id=`ngrecaptcha-${ut++}`,this.errorMode="default",this.resolved=new N,this.error=new N,this.errored=new N,r&&(this.siteKey=r.siteKey,this.theme=r.theme,this.type=r.type,this.size=r.size,this.badge=r.badge)}ngAfterViewInit(){this.subscription=this.loader.ready.subscribe(t=>{t!=null&&t.render instanceof Function&&(this.grecaptcha=t,this.renderRecaptcha())})}ngOnDestroy(){this.grecaptchaReset(),this.subscription&&this.subscription.unsubscribe()}execute(){this.size==="invisible"&&(this.widget!=null?this.grecaptcha.execute(this.widget):this.executeRequested=!0)}reset(){this.widget!=null&&(this.grecaptcha.getResponse(this.widget)&&this.resolved.emit(null),this.grecaptchaReset())}get __unsafe_widgetValue(){return this.widget!=null?this.grecaptcha.getResponse(this.widget):null}expired(){this.resolved.emit(null)}onError(t){this.error.emit(t),this.errored.emit(t)}captchaResponseCallback(t){this.resolved.emit(t)}grecaptchaReset(){this.widget!=null&&this.zone.runOutsideAngular(()=>this.grecaptcha.reset(this.widget))}renderRecaptcha(){let t={badge:this.badge,callback:i=>{this.zone.run(()=>this.captchaResponseCallback(i))},"expired-callback":()=>{this.zone.run(()=>this.expired())},sitekey:this.siteKey,size:this.size,tabindex:this.tabIndex,theme:this.theme,type:this.type};this.errorMode==="handled"&&(t["error-callback"]=(...i)=>{this.zone.run(()=>this.onError(i))}),this.widget=this.grecaptcha.render(this.elementRef.nativeElement,t),this.executeRequested===!0&&(this.executeRequested=!1,this.execute())}static{this.\u0275fac=function(i){return new(i||e)(u(ne),u(Fe),u(se),u(Y,8))}}static{this.\u0275cmp=h({type:e,selectors:[["re-captcha"]],hostVars:1,hostBindings:function(i,o){i&2&&ce("id",o.id)},inputs:{id:"id",siteKey:"siteKey",theme:"theme",type:"type",size:"size",tabIndex:"tabIndex",badge:"badge",errorMode:"errorMode"},outputs:{resolved:"resolved",error:"error",errored:"errored"},exportAs:["reCaptcha"],decls:0,vars:0,template:function(i,o){},encapsulation:2})}}return e})(),pt=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=R({type:e})}static{this.\u0275inj=A({})}}return e})(),He=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=R({type:e})}static{this.\u0275inj=A({providers:[Fe],imports:[pt]})}}return e})();var Z=Qe(We());var ft=["recaptchaSenace"];function gt(e,f){e&1&&(a(0,"small",22),d(1,"Usuario es obligatorio"),n())}function vt(e,f){e&1&&(a(0,"small",22),d(1,"Clave es obligatoria"),n())}var Be=(()=>{class e{constructor(t,i,o,r){this.fb=t,this.router=i,this.authService=o,this.configService=r,this.recaptchaToken="null",this.loading=!1,this.isResolved=!1,this.captchaResponse="",this.formLogin=this.fb.group({username:["20611742283",[M.required,M.maxLength(30)]],password:["986095",[M.required,M.maxLength(30)]],ti_empresa:[1,[M.required]],recaptcha:[""],usuariob:[""]})}ngOnInit(){localStorage.clear()}ngAfterViewInit(){this.recaptchaSenace.execute()}login(){if(this.formLogin.valid&&this.recaptchaToken){this.loading=!0;let{username:t,password:i}=this.formLogin.value,o={usuario:t.toLowerCase().trim(),clave:i.trim(),ti_empresa:this.formLogin.controls.ti_empresa.value,usuariob:this.formLogin.controls.usuariob.value,captchaResponse:this.recaptchaToken};this.authService.login(o).pipe(G()).subscribe({next:r=>{if(r.status=="OK"){console.log("Login success",r);let m=r.value[0].id_usuario;this.loginRaca(m)}else this.errorEnLogin(r)},error:r=>{this.errorEnLogin(r)}})}else return console.log("Formulario inv\xE1lido"),Object.values(this.formLogin.controls).forEach(t=>{t.markAllAsTouched()})}loginFAKE(){if(this.formLogin.valid){this.loading=!0;let{username:t,password:i}=this.formLogin.value,o={usuario:t.toLowerCase().trim(),clave:i.trim(),ti_empresa:this.formLogin.controls.ti_empresa.value,usuariob:this.formLogin.controls.usuariob.value,captchaResponse:"this.recaptchaToken"};this.authService.login(o).subscribe({next:r=>{this.fakeLogin()},error:r=>{this.fakeLogin()}})}else return console.log("Formulario inv\xE1lido"),Object.values(this.formLogin.controls).forEach(t=>{t.markAllAsTouched()})}fakeLogin(){let t={UserName:"20611742283",UserNameB:null,Email:"contactus@tapiavalley.com",FullName:null,Token:null,id_usuario:9373,id_persona:5607,flg_expire:"1",movil:"914903701",es_movil_verificado:"1"};localStorage.setItem(E.tokenSenase,"response.message"),localStorage.setItem(E.userKey,JSON.stringify(t)),console.log("localStorage login FAKE senace"),this.loginRaca(t.id_usuario)}loginRaca(t){let i={user:"usr_rnca",password:"28112024Senace",iduser:t};this.authService.loginRaca(i).pipe(G()).subscribe({next:o=>{o.access_Token?(console.log("Login Raca success",o),this.router.navigate(["/home"])):this.errorEnLogin(o)},error:o=>{this.errorEnLogin(o)}})}errorEnLogin(t){localStorage.clear(),Z.default.fire("Error","No se pudo iniciar sesi\xF3n","error"),this.loadingReset(!1)}loadingReset(t=!0){t&&Z.default.close(),this.loading=!1,this.isResolved=!1}onCaptchaResolved(t){this.isResolved=!0,this.recaptchaToken=t,this.formLogin.controls.recaptcha.setValue(t),console.log("Captcha resolved",t)}get usernameNoValido(){let t=this.formLogin.get("username");return t?t.invalid&&t.touched:!1}get passwordNoValido(){let t=this.formLogin.get("password");return t?t.invalid&&t.touched:!1}get siteKey(){return this.configService.recaptchaSiteKey}static{this.\u0275fac=function(i){return new(i||e)(u(Ie),u(_),u(g),u(B))}}static{this.\u0275cmp=h({type:e,selectors:[["app-login"]],viewQuery:function(i,o){if(i&1&&de(ft,5),i&2){let r;ue(r=pe())&&(o.recaptchaSenace=r.first)}},standalone:!0,features:[Q([{provide:Y,useValue:{siteKey:E.recaptchaSiteKey,size:"invisible"}}]),P],decls:27,vars:9,consts:[["recaptcha",""],["recaptchaSenace",""],[1,"row","mt-5"],[1,"col-xl-5","col-lg-6","col-md-8","col-sm-10","col-12","mx-auto"],[1,"row"],[1,"col-xl-8","col-lg-8","col-md-8","col-sm-12","rounded-left-login","bg-white","px-4",2,"padding-top","6em"],["autocomplete","off",1,"pb-4",3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],[1,"input-group","form-control-login"],[1,"input-group-text","bg-transparent","form-control-login"],["aria-hidden","true",1,"fa","fa-user"],["type","text","formControlName","username","maxlength","30","placeholder","Usuario",1,"form-control","form-control-login"],["class","text-danger",4,"ngIf"],[1,"input-group"],["aria-hidden","true",1,"fa","fa-lock"],["type","password","formControlName","password","maxlength","30","placeholder","Clave de acceso",1,"form-control","form-control-login"],["id","s-recaptcha"],["errorMode","handled",3,"resolved","siteKey"],[1,"row","justify-content-center"],["type","submit",1,"btn","btn-info-senace",3,"disabled"],[1,"fa","fa-check"],[1,"col-xl-4","col-lg-4","col-md-4","d-none","d-md-block","rounded-right-login","padding-0","login-imagen-right"],[1,"text-danger"]],template:function(i,o){if(i&1){let r=O();a(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"form",6),S("ngSubmit",function(){return k(r),j(o.loginFAKE())}),a(5,"div",7)(6,"div",8)(7,"div",9),c(8,"i",10),n(),c(9,"input",11),n(),w(10,gt,2,0,"small",12),n(),a(11,"div",7)(12,"div",13)(13,"div",9),c(14,"i",14),n(),c(15,"input",15),n(),w(16,vt,2,0,"small",12),n(),a(17,"div",7),c(18,"div",16,0),a(20,"re-captcha",17,1),S("resolved",function(v){return k(r),j(o.onCaptchaResolved(v))}),n()(),a(22,"div",18)(23,"button",19),c(24,"i",20),d(25," Ingresar "),n()()()(),c(26,"div",21),n()()()}i&2&&(s(4),l("formGroup",o.formLogin),s(5),q("is-invalid",o.usernameNoValido),s(),l("ngIf",o.usernameNoValido),s(5),q("is-invalid",o.passwordNoValido),s(),l("ngIf",o.passwordNoValido),s(4),l("siteKey",o.siteKey||""),s(3),l("disabled",o.loading))},dependencies:[V,F,L,Ae,Ee,_e,Me,je,Re,ke,He,Ve,H],styles:['.btn-info-senace.disabled[_ngcontent-%COMP%], .btn-info-senace[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-info-senace[_ngcontent-%COMP%]{color:#fff;width:fit-content;background:#0086b0;background:linear-gradient(90deg,#0086b0,#0f64c0 52%,#1f41d1)}.form-control-login[_ngcontent-%COMP%]{color:#0086b0}*[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#0086b0!important}*[_ngcontent-%COMP%]:-moz-placeholder{color:#0086b0!important;opacity:1}*[_ngcontent-%COMP%]::-moz-placeholder{color:#0086b0!important;opacity:1}*[_ngcontent-%COMP%]:-ms-input-placeholder{color:#0086b0!important}*[_ngcontent-%COMP%]::-ms-input-placeholder{color:#0086b0!important}*[_ngcontent-%COMP%]::placeholder{color:#0086b0!important}.login-imagen-right[_ngcontent-%COMP%]{background-image:url("/rnca/media/login-right-DYPPUN2F.png");background-position:left top;background-repeat:no-repeat}.rounded-left-login[_ngcontent-%COMP%]{border-top-left-radius:20px!important;border-bottom-left-radius:20px!important}.rounded-right-login[_ngcontent-%COMP%]{border-top-right-radius:20px!important;border-bottom-right-radius:20px!important}']})}}return e})();var ze=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=h({type:e,selectors:[["app-home"]],standalone:!0,features:[P],decls:4,vars:1,consts:[[1,"w-100"],[1,"row","mt-5"],[1,"col-md-4","mx-auto"],[1,"img-fluid","rounded",3,"src"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),c(3,"img",3),n()()()),i&2&&(s(3),l("src","./assets/img/logo_senace.png",y))}})}}return e})();var K=(()=>{class e{constructor(t,i){this.authService=t,this.router=i}canActivate(){return this.authService.isAuthenticated()?!0:(this.router.navigate(["/login"]),!1)}static{this.\u0275fac=function(i){return new(i||e)(p(g),p(_))}}static{this.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ue=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:Be},{path:"home",canActivate:[K],component:ze},{path:"registro-consultora",canActivate:[K],loadChildren:()=>import("./chunk-P7JZVLV6.js").then(e=>e.RegistroConsultoraModule)},{path:"curriculum-vitae",canActivate:[K],loadChildren:()=>import("./chunk-26ZOZIML.js").then(e=>e.CurriculumVitaeModule)}];var Ke=(()=>{class e{constructor(t,i){this.authService=t,this.configService=i}intercept(t,i){let o="";return t.url.includes(this.configService.pathApiSenance)?o=this.authService.getTokenSenace():t.url.includes(this.configService.pathApiRaca)&&(o=this.authService.getTokenRaca()),o&&(t=t.clone({setHeaders:{Accept:"application/json, text/plain, */*",Authorization:`Bearer ${o}`}})),i.handle(t)}static{this.\u0275fac=function(i){return new(i||e)(p(g),p(B))}}static{this.\u0275prov=C({token:e,factory:e.\u0275fac})}}return e})();var Ge=(()=>{class e{intercept(t,i){return i.handle(t).pipe(ie(o=>{if(o instanceof ge){let r=o.body;if(r.resultado&&r.resultado!==0)throw new ve({error:r,headers:o.headers,status:400,statusText:"Bad Request (api.interceptor)",url:o.url||void 0})}return o}),re(o=>te(o)))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=C({token:e,factory:e.\u0275fac})}}return e})();var qe=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=R({type:e,bootstrap:[De]})}static{this.\u0275inj=A({providers:[{provide:X,useClass:Ke,multi:!0},{provide:X,useClass:Ge,multi:!0},{provide:me,useClass:he}],imports:[Ce,V,Te,Le,L,H,L,Se.forRoot(Ue)]})}}return e})();E.production&&void 0;be().bootstrapModule(qe).catch(e=>console.error(e));
